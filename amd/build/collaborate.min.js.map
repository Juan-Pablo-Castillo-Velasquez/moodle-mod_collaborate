{"version":3,"sources":["../src/collaborate.js"],"names":["define","$","canCopy","document","queryCommandSupported","queryCommandEnabled","deselectText","selection","empty","window","getSelection","removeAllRanges","copyText","element","select","execCommand","doc","range","body","createTextRange","moveToElementText","createRange","selectNodeContents","addRange","applyClickToCopy","addClass","click","e","preventDefault","parent","find","focus","init"],"mappings":"AA0BAA,OAAM,+BAAC,CAAC,QAAD,CAAD,CAAa,SAASC,CAAT,CAAY,IAMvBC,CAAAA,CAAO,CAAG,UAAW,CAErB,MAAOC,CAAAA,QAAQ,CAACC,qBAAT,CAA+B,MAA/B,GACAD,QAAQ,CAACE,mBAAT,CAA6B,MAA7B,CACV,CAV0B,CAevBC,CAAY,CAAG,UAAW,CAC1B,GAAIH,QAAQ,CAACI,SAAb,CAAwB,CAEpBJ,QAAQ,CAACI,SAAT,CAAmBC,KAAnB,EACH,CAHD,IAGO,CAEH,GAAID,CAAAA,CAAS,CAAGE,MAAM,CAACC,YAAP,EAAhB,CACAH,CAAS,CAACI,eAAV,EACH,CACJ,CAxB0B,CA+BvBC,CAAQ,CAAG,SAASC,CAAT,CAAkB,CAG7B,GAAIA,CAAO,WAAYZ,CAAAA,CAAvB,CAA0B,CACtBY,CAAO,CAAGA,CAAO,CAAC,CAAD,CACpB,CAED,GAAIA,CAAO,CAACC,MAAZ,CAAoB,CAChBD,CAAO,CAACC,MAAR,GACAX,QAAQ,CAACY,WAAT,CAAqB,MAArB,EACAT,CAAY,GACZ,MACH,CAED,GAAIU,CAAAA,CAAG,CAAGb,QAAV,CACIc,CADJ,CAEIV,CAFJ,CAIA,GAAIS,CAAG,CAACE,IAAJ,CAASC,eAAb,CAA8B,CAC1BF,CAAK,CAAGd,QAAQ,CAACe,IAAT,CAAcC,eAAd,EAAR,CACAF,CAAK,CAACG,iBAAN,CAAwBP,CAAxB,EACAI,CAAK,CAACH,MAAN,GACAX,QAAQ,CAACY,WAAT,CAAqB,MAArB,EACAT,CAAY,EACf,CAND,IAMO,IAAIG,MAAM,CAACC,YAAX,CAAyB,CAC5BH,CAAS,CAAGE,MAAM,CAACC,YAAP,EAAZ,CACAO,CAAK,CAAGd,QAAQ,CAACkB,WAAT,EAAR,CACAJ,CAAK,CAACK,kBAAN,CAAyBT,CAAzB,EACAN,CAAS,CAACI,eAAV,GACAJ,CAAS,CAACgB,QAAV,CAAmBN,CAAnB,EACAd,QAAQ,CAACY,WAAT,CAAqB,MAArB,EACAT,CAAY,EACf,CACJ,CAhE0B,CAqEvBkB,CAAgB,CAAG,UAAW,CAC9B,GAAItB,CAAO,EAAX,CAAe,CACXD,CAAC,CAAC,eAAD,CAAD,CAAmBwB,QAAnB,CAA4B,SAA5B,EACAxB,CAAC,CAAC,sBAAD,CAAD,CAA0ByB,KAA1B,CAAgC,SAASC,CAAT,CAAW,CACvCA,CAAC,CAACC,cAAF,GACAhB,CAAQ,CAACX,CAAC,CAAC,IAAD,CAAD,CAAQ4B,MAAR,CAAe,MAAf,EAAuBC,IAAvB,CAA4B,OAA5B,CAAD,CAAR,CACA7B,CAAC,CAAC,IAAD,CAAD,CAAQ4B,MAAR,CAAe,MAAf,EAAuBJ,QAAvB,CAAgC,QAAhC,EACAxB,CAAC,CAAC,IAAD,CAAD,CAAQ4B,MAAR,CAAe,MAAf,EAAuBC,IAAvB,CAA4B,KAA5B,EAAmCC,KAAnC,EACH,CALD,CAMH,CACJ,CA/E0B,CAiF3B,MAAO,CAACC,IAAI,CAAC,eAAU,CAACR,CAAgB,EAAI,CAArC,CACV,CAlFK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Module javascript.\n *\n * @package   mod_collaborate\n * @copyright Copyright (c) 2016 Blackboard Inc. (http://www.blackboard.com)\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module mod/collaborate\n */\ndefine(['jquery'], function($) {\n\n    /**\n     * Does the browser support copying?\n     * @returns {bool}\n     */\n    var canCopy = function() {\n        // We have to test for either supported or enabled as this is not consistent across browsers.\n        return document.queryCommandSupported('copy') ||\n               document.queryCommandEnabled('copy');\n    };\n\n    /**\n     * Deselect Text.\n     */\n    var deselectText = function() {\n        if (document.selection) {\n            // Internet Explorer clear selection.\n            document.selection.empty();\n        } else {\n            // All other browsers clear selection.\n            var selection = window.getSelection();\n            selection.removeAllRanges();\n        }\n    };\n\n    /**\n     * Copy text of specific element\n     * @param element\n     * @constructor\n     */\n    var copyText = function(element) {\n        // Based on code found at:\n        // http://stackoverflow.com/questions/985272/selecting-text-in-an-element-akin-to-highlighting-with-your-mouse .\n        if (element instanceof $) {\n            element = element[0];\n        }\n\n        if (element.select) {\n            element.select();\n            document.execCommand('copy');\n            deselectText();\n            return;\n        }\n\n        var doc = document,\n            range,\n            selection;\n\n        if (doc.body.createTextRange) {\n            range = document.body.createTextRange();\n            range.moveToElementText(element);\n            range.select();\n            document.execCommand('copy');\n            deselectText();\n        } else if (window.getSelection) {\n            selection = window.getSelection();\n            range = document.createRange();\n            range.selectNodeContents(element);\n            selection.removeAllRanges();\n            selection.addRange(range);\n            document.execCommand('copy');\n            deselectText();\n        }\n    };\n\n    /**\n     * Apply \"click to copy\" events.\n     */\n    var applyClickToCopy = function() {\n        if (canCopy()) {\n            $('.copyablelink').addClass('enabled');\n            $('.copyablelink button').click(function(e){\n                e.preventDefault();\n                copyText($(this).parent('form').find('input'));\n                $(this).parent('form').addClass('copied');\n                $(this).parent('form').find('div').focus();\n            });\n        }\n    };\n\n    return {init:function(){applyClickToCopy();}};\n});\n"],"file":"collaborate.min.js"}