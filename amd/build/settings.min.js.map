{"version":3,"sources":["../src/settings.js"],"names":["define","$","str","templates","init","contextId","modified","strings","checkFieldsComplete","flds","f","fld","val","trim","checkRESTFieldsComplete","checkSOAPFieldsComplete","apiMsg","stringKey","alertClass","extraClasses","api","msg","msgContainer","children","first","clone","addClass","html","remove","append","testRestApi","dataRest","contextid","ajax","url","M","cfg","wwwroot","context","document","body","data","success","error","testSoapApi","dataSoap","css","applyClickApiTest","click","e","preventDefault","applySettingChangeCheck","keypress","get_strings","key","component","then","s","connectionfailed","connectionverified","verifyingapi","connectionstatusunknown","test","navigator","userAgent","attr","uiinit","migrationStatus","selector","theme","targetNode","querySelector","setAttribute","getElementById","observer","MutationObserver","callback","mutationsList","i","mutation","type","attributeName","selectNode","disabled","is","length","localizedstring","render","classes","message","parent","removeClass","observe","attributes"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Settings JS.\n *\n * @package   mod_collaborate\n * @copyright Copyright (c) 2017 Open LMS\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/str', 'core/templates'], function($, str, templates) {\n\n    return {\n        /**\n         * Initialising function\n         * @param {int} contextId\n         */\n        init: function(contextId) {\n\n            var modified = false,\n                strings = {};\n\n            /**\n             * Check that settings fields have been completed.\n             * @param {array} flds\n             * @returns {boolean}\n             */\n            var checkFieldsComplete = function(flds) {\n                for (var f in flds) {\n                    var fld = flds[f];\n                    var val = '' + $('#id_s_collaborate_' + fld).val().trim();\n                    if (val === '') {\n                        return false;\n                    }\n                }\n                return true;\n            };\n\n            /**\n             * Check that REST settings have been completed.\n             * @returns {boolean}\n             */\n            var checkRESTFieldsComplete = function() {\n                var flds = ['restserver', 'restkey', 'restsecret'];\n                return checkFieldsComplete(flds);\n            };\n\n            /**\n             * Check that SOAP settings have been compelted.\n             * @returns {boolean}\n             */\n            var checkSOAPFieldsComplete = function() {\n                var flds = ['server', 'username', 'password'];\n                return checkFieldsComplete(flds);\n            };\n\n            /**\n             * Render new api status message.\n             *\n             * @param string stringKey\n             * @param string alertClass\n             * @param string extraClasses\n             */\n            var apiMsg = function(stringKey, alertClass, extraClasses, api) {\n                var msg = strings[stringKey];\n\n                var msgContainer = $('#api_diag .noticetemplate_' + alertClass).children().first().clone();\n\n                $(msgContainer).addClass(extraClasses);\n                $(msgContainer).addClass(api);\n                $(msgContainer).html('<span class=\"api-connection-msg\">' + api + ' - ' + msg + '</span>');\n\n                // Wipe out existing connection status msg container.\n                $('#api_diag .api-connection-status .undefined').remove();\n                $('#api_diag .api-connection-status .' + api).remove();\n\n                // Put in new msg container.\n                $('#api_diag .api-connection-status').append($(msgContainer));\n            };\n\n            /**\n             * Test api.\n             */\n            var testRestApi = function() {\n                var dataRest;\n\n                if (checkRESTFieldsComplete()) {\n                    apiMsg('verifyingapi', 'message', 'spinner', 'REST');\n                    dataRest = {\n                        'server': $('#id_s_collaborate_restserver').val().trim(),\n                        'restkey': $('#id_s_collaborate_restkey').val().trim(),\n                        'restsecret': $('#id_s_collaborate_restsecret').val() // Never trim secrets!\n                    };\n                    dataRest.contextid = contextId;\n                    $.ajax({\n                        url: M.cfg.wwwroot + '/mod/collaborate/testapi.php',\n                        context: document.body,\n                        data: dataRest,\n                        success: function(data) {\n                            if (data.success) {\n                                if (!modified) {\n                                    apiMsg('connectionverified', 'success', '', 'REST');\n                                } else {\n                                    apiMsg('connectionverifiedchanged', 'success', '', 'REST');\n                                }\n                            } else {\n                                apiMsg('connectionfailed', 'problem', '', 'REST');\n                            }\n                        },\n                        error: function() {\n                            apiMsg('connectionfailed', 'problem', '', 'REST');\n                        }\n                    });\n                }\n            };\n\n            var testSoapApi = function() {\n                var dataSoap;\n\n                // If REST credentials are set only the message with Credentials Verified will show up.\n                if (checkSOAPFieldsComplete()) {\n                    if (!checkRESTFieldsComplete()) {\n                        apiMsg('verifyingapi', 'message', 'spinner', 'SOAP');\n                    }\n                    dataSoap = {\n                        'server': $('#id_s_collaborate_server').val().trim(),\n                        'username': $('#id_s_collaborate_username').val().trim(),\n                        'password': $('#id_s_collaborate_password').val() // Never trim passwords!\n                    };\n\n                    dataSoap.contextid =  contextId;\n                    $.ajax({\n                        url: M.cfg.wwwroot + '/mod/collaborate/testapi.php',\n                        context: document.body,\n                        data: dataSoap,\n                        success: function(data) {\n                            if (data.success) {\n                                if (!modified) {\n                                    apiMsg('connectionverified', 'success', '', 'SOAP');\n                                } else {\n                                    apiMsg('connectionverifiedchanged', 'success', '', 'SOAP');\n                                }\n                                $('.soapapisettings').css('display', 'block');\n                            } else {\n                                if (!checkRESTFieldsComplete()) {\n                                    apiMsg('connectionfailed', 'problem', '', 'SOAP');\n                                }\n                            }\n                        },\n                        error: function() {\n                            if (!checkRESTFieldsComplete()) {\n                                apiMsg('connectionfailed', 'problem', '', 'SOAP');\n                            }\n                        }\n                    });\n                }\n            };\n\n            /**\n             * Apply listener for api test button.\n             *\n             * @author Guy Thomas\n             */\n            var applyClickApiTest = function() {\n                $('.api_diag_btn').click(function(e) {\n                    e.preventDefault();\n                    testRestApi();\n                    testSoapApi();\n                });\n            };\n\n            /**\n             * Apply listener for when settings changed.\n             *\n             * @author Guy Thomas\n             */\n            var applySettingChangeCheck = function() {\n                var settingfields = '#id_s_collaborate_server, #id_s_collaborate_username, #id_s_collaborate_password';\n                $(settingfields).keypress(function() {\n                    modified = true;\n                });\n            };\n\n            str.get_strings([\n                {key: 'connectionfailed', component: 'mod_collaborate'},\n                {key: 'connectionverified', component: 'mod_collaborate'},\n                {key: 'verifyingapi', component: 'mod_collaborate'},\n                {key: 'connectionstatusunknown', component: 'mod_collaborate'}\n            ]).then(function(s){\n\n                strings.connectionfailed = s[0];\n                strings.connectionverified = s[1];\n                strings.verifyingapi = s[2];\n                strings.connectionstatusunknown = s[3];\n\n                applySettingChangeCheck();\n                applyClickApiTest();\n\n                if (checkRESTFieldsComplete()) {\n                    testRestApi();\n                }\n                if (checkSOAPFieldsComplete()) {\n                    testSoapApi();\n                }\n                // For IE / Edge, disable fieldset fields.\n                if (/Edge\\/\\d./i.test(navigator.userAgent)\n                    || /MSIE/i.test(navigator.userAgent)\n                    || /Trident/i.test(navigator.userAgent)) {\n                    $('fieldset[disabled=\"true\"] input').attr('disabled', 'true');\n                }\n\n                // If REST settings not complete then reveal SOAP settings.\n                if (!checkRESTFieldsComplete()) {\n                    $('.soapapisettings').css('display', 'block');\n                }\n\n            });\n\n        },\n\n        // Method to initialize UI fixes.\n        uiinit: function(migrationStatus) {\n            if (migrationStatus && migrationStatus < 5) {\n                let selector = '#page-mod-collaborate-mod section#region-main div[role=\\'main\\']';\n                if (M.cfg.theme === 'snap') {\n                    selector = '#page-mod-collaborate-mod main div[role=\\'main\\']';\n                }\n                const targetNode = document.querySelector(selector);\n                if (targetNode) {\n                    targetNode.setAttribute('style', 'display: none;');\n                }\n            }\n            const targetNode = document.getElementById('id_largesessionenable');\n            const config = { attributes: true};\n            const callback = function(mutationsList) {\n                for (const i in mutationsList) {\n                    const mutation = mutationsList[i];\n                    if (mutation.type === 'attributes' && mutation.attributeName === 'disabled') {\n                        const selectNode = $('[id=\"id_largesessionenable\"]');\n                        const disabled = selectNode.is(':disabled');\n                        // Remove all alerts if they exist\n                        if ($('.collab-alert').length > 0) {\n                            $('.collab-alert').remove();\n                        }\n                        if (disabled) {\n                            (function() {\n                                return str.get_strings([\n                                    {key: 'optionnotavailableforgroups', component: 'mod_collaborate'}\n                                ]);\n                            })()\n                                .then(function(localizedstring){\n                                    if (M.cfg.theme === 'snap') {\n                                        return templates.render('theme_snap/form_alert', {\n                                            type: 'warning',\n                                            classes: 'collab-alert',\n                                            message: localizedstring\n                                        });\n                                    } else {\n                                        return '<div class=\"alert alert-warning collab-alert\" role=\"alert\">' +\n                                            localizedstring +\n                                            '</div>';\n                                    }\n                                })\n                                .then(function (html) {\n                                    // Add warning.\n                                    selectNode.parent().parent().parent().append(html);\n                                    if (M.cfg.theme === 'snap') {\n                                        // Colors for disabling the divs.\n                                        selectNode.parent().parent().parent().addClass('mod-collaborate-dimmed-option');\n                                    }\n                                });\n                        } else {\n                            if (M.cfg.theme === 'snap') {\n                                selectNode.parent().parent().parent().removeClass('mod-collaborate-dimmed-option');\n                            }\n                        }\n                    }\n                }\n            };\n            const observer = new MutationObserver(callback);\n            observer.observe(targetNode, config);\n        }\n    };\n});\n"],"file":"settings.min.js"}